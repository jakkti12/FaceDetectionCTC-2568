{"version":3,"file":"login-Cn_UmFCY.js","sources":["../../../../components/auth/LoginComponent.vue","../../../../pages/auth/login.vue"],"sourcesContent":["<template>\r\n  <!-- navbar ที่อยู่ในหน้า login -->\r\n  <v-alert\r\n    v-if=\"error || success\"\r\n    :type=\"error ? 'error' : 'success'\"\r\n    closable\r\n    :title=\"error ? 'Login Failed' : 'Login Successful'\"\r\n    text\r\n    variant=\"elevated\"\r\n    class=\"alert-global\"\r\n  >\r\n    {{ error || success }}\r\n  </v-alert>\r\n  <div class=\"container\">\r\n    <div class=\"row text-center mt-5\">\r\n      <div class=\"col\">\r\n        <div class=\"p-2\">\r\n          <img style=\"width: 350px; border-radius: 100%;\" src=\"~/assets/images/NewLogo.png\" alt=\"Logo\" />\r\n        </div>\r\n        <h2>ลงชื่อเข้าใช้</h2>\r\n        <p>\r\n          หรือ\r\n          <a href=\"/auth/register\" class=\"\">สมัครสมาชิก</a>\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mt-5 justify-content-center\">\r\n      <div class=\"col-md-8 col-lg-6\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n            <form @submit.prevent=\"login\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"inputEmail\" class=\"form-label\">ชื่อผู้ใช้</label>\r\n                <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"inputEmail\" aria-describedby=\"emailHelp\" required/>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"inputPassword\" class=\"form-label\">รหัสผ่าน</label>\r\n                <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"inputPassword\" required/>\r\n              </div>\r\n              <div class=\"d-flex w-100 justify-content-between mb-3\">\r\n                <div class=\"form-check\">\r\n                  <input type=\"checkbox\" name=\"remember\" value=\"1\" class=\"form-check-input\" id=\"checkRememberMe\" />\r\n                  <label class=\"form-check-label\" for=\"checkRememberMe\">จดจําฉัน</label>\r\n                </div>\r\n                <div>\r\n                  <a href=\"#\" class=\"link-primary\">ลืมรหัสผ่าน</a>\r\n                </div>\r\n              </div>\r\n              <v-btn type=\"submit\"  class=\"w-100\" color=\"primary\">\r\n                เข้าสู่ระบบ\r\n              </v-btn>\r\n            </form>\r\n            <hr />\r\n            <div class=\"text-center\">\r\n              <a href=\"/\" class=\"link-secondary\">กลับสู่หน้าหลัก</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\nimport { getUser } from '~/utils/users';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      error: null,\r\n      success: null,\r\n      user: {\r\n        id: '',\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.checkUser();\r\n  },\r\n  methods: {\r\n    async checkUser() {\r\n      const result = await getUser();\r\n      if (result.is_logged_in) {\r\n        this.$router.push('/');\r\n      }\r\n    },\r\n    async login() {\r\n      this.error = null;\r\n      this.success = null;\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:7000/auth/login', {\r\n          username: this.username,\r\n          password: this.password,\r\n        });\r\n        localStorage.setItem('token', response.data.token);\r\n        this.success = response.data.message;\r\n        setTimeout(() => this.$router.push('/'), 2000); // เปลี่ยนเส้นทางหลังจากแสดงข้อความสำเร็จ\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || 'An error occurred';\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Alert */\r\n.alert-global {\r\n    position: absolute !important;\r\n    top: 30px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    z-index: 999;\r\n    width: 90%;\r\n    max-width: 500px;\r\n    padding: 1rem 1.5rem;\r\n    border-radius: 10px;\r\n    font-size: 1.2rem;\r\n    box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n.alert-global[v-type=\"error\"] {\r\n    background-color: #f8d7da;\r\n    color: #721c24;\r\n    border: 1px solid #f5c6cb;\r\n}\r\n.alert-global[v-type=\"success\"] {\r\n    background-color: #d4edda;\r\n    color: #155724;\r\n    border: 1px solid #c3e6cb;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n","<template>\r\n  <LoginComponent />\r\n  <FooterComponent/>\r\n</template>\r\n\r\n<script>\r\nimport LoginComponent from '~/components/auth/LoginComponent.vue'\r\nimport FooterComponent from '~/components/footer/FooterComponent.vue'\r\n\r\nexport default {\r\n  components: {\r\n    LoginComponent,\r\n    FooterComponent\r\n  },\r\n};\r\n</script>"],"names":["_sfc_main","_ssrRenderComponent","_component_v_alert","_withCtx","_push","_parent","_ssrInterpolate","_createTextVNode","_toDisplayString","_ssrRenderStyle","_ssrRenderAttr","_component_v_btn","FooterComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;AAqEA,MAAKA,cAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,MACV,OAAO;AAAA,MACP,SAAS;AAAA,MACT,MAAM;AAAA,QACJ,IAAI;AAAA,MACL;AAAA;EAEJ;AAAA,EACD,UAAU;AACR,SAAK,UAAS;AAAA,EACf;AAAA,EACD,SAAS;AAAA,IACP,MAAM,YAAY;AAChB,YAAM,SAAS,MAAM;AACrB,UAAI,OAAO,cAAc;AACvB,aAAK,QAAQ,KAAK,GAAG;AAAA,MACvB;AAAA,IACD;AAAA,IACD,MAAM,QAAQ;;AACZ,WAAK,QAAQ;AACb,WAAK,UAAU;AAEf,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,KAAK,oCAAoC;AAAA,UACpE,UAAU,KAAK;AAAA,UACf,UAAU,KAAK;AAAA,QACjB,CAAC;AACD,qBAAa,QAAQ,SAAS,SAAS,KAAK,KAAK;AACjD,aAAK,UAAU,SAAS,KAAK;AAC7B,mBAAW,MAAM,KAAK,QAAQ,KAAK,GAAG,GAAG,GAAI;AAAA,MAC7C,SAAO,KAAK;AACZ,aAAK,UAAQ,eAAI,aAAJ,mBAAc,SAAd,mBAAoB,YAAW;AAAA,MAC9C;AAAA,IACD;AAAA,EACF;AACH;;AA5GA,QAAA,UAAA;AAGU,MAAA,MAAA,SAAS,MAAO,SAAA;AAH1B,UAAAC,mBAAAC,QAAA;AAAA,MAIK,MAAM,MAAK,QAAA,UAAA;AAAA,MACZ,UAAA;AAAA,MACC,OAAO,MAAK,QAAA,iBAAA;AAAA,MACb,MAAA;AAAA,MACA,SAAQ;AAAA,MACR,OAAM;AAAA;MATV,SAAAC,QAEE,CAUU,GAAAC,QAAAC,UAAA,aAAA;AAZZ,YAAAD,QAAA;AAAA,UAAAA,OAAA,GAAAE,eAWO,MAAK,SAAI,MAAO,OAAA,CAAA,EAAA;AAAA;;YAXvBC,gBAWOC,gBAAA,MAAA,SAAS,MAAO,OAAA,GAAA,CAAA;AAAA;;;MAXvB,GAAA;AAAA;;AAAA,UAAA,SAAA;AAAA;AAAA,QAAA,0KAAAC,eAiBe,EAA0C,SAAA,SAAA,iBAAA,OAAA,CAAA,KAjBzDC,cAiB0D,OAAA,UAAiC;MAapE,MAAK,OAAA;AA9B5B,UAAA,sCAAAJ,eA8B+C,MAAK,KAAA,CAAA,QAAA;AAAA;AA9BpD,UAAA,SAAA;AAAA;AAAA,QAAA,8IAAAI,cAAA,SAkCgC,MAAQ,QAAA,wOAlCxCA,cAAA,SAsCgC,MAAQ,QAAA;AAtCxC,QAAAT,mBAAAU,MAAA;AAAA,IAiDqB,MAAK;AAAA,IAAU,OAAM;AAAA,IAAQ,OAAM;AAAA;IAjDxD,SAAAR,QAiDc,CAEQ,GAAAC,QAAAC,UAAA,aAAA;AAnDtB,UAAAD,QAAA;AAAA,QAAAA,OAAA,eAAA;AAAA;;UAAAG,gBAiDkE,eAEpD;AAAA;;;IAnDd,GAAA;AAAA;AAAA,QAAA,wLAAA;;;;;;;;;ACSA,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,IACA,iBAAAK;AAAAA,EACD;AACH;;;;AAdA,QAAA,UAAA;AAAA,QAAAX,mBAAA,2BAAA,MAAA,MAAA,OAAA,CAAA;AAAA,QAAAA,mBAAA,4BAAA,MAAA,MAAA,OAAA,CAAA;AAAA,QAAA,UAAA;;;;;;;;;"}