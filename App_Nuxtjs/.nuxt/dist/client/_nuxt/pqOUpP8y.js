import{_}from"./CQYZWQCR.js";import{a as k}from"./CCb-kr4I.js";import{g as x,V}from"./CBkuNycD.js";import{_ as g,t as n,v as l,J as C,A as c,B as m,y as u,N as p,x as s,S as v,Q as B,T as b,U as f,z as d,O as h,g as L}from"./gszgXTxS.js";import{_ as N}from"./7qluULSw.js";import{d as S}from"./BZISSxIt.js";import"./xT3liDgT.js";const U={data(){return{username:"",password:"",error:null,success:null,user:{id:""}}},mounted(){this.checkUser()},methods:{async checkUser(){(await x()).is_logged_in&&this.$router.push("/")},async login(){var a,e;this.error=null,this.success=null;try{const r=await k.post("http://localhost:7000/auth/login",{username:this.username,password:this.password});localStorage.setItem("token",r.data.token),this.success=r.data.message,setTimeout(()=>this.$router.push("/"),2e3)}catch(r){this.error=((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"An error occurred"}}}},F={class:"container"},M={class:"row mt-5 justify-content-center"},T={class:"col-md-8 col-lg-6"},A={class:"card"},E={class:"card-body"},j={key:0,class:"error"},q={class:"mb-3"},D={class:"mb-3"};function I(a,e,r,y,t,i){return n(),l(h,null,[t.error||t.success?(n(),C(V,{key:0,type:t.error?"error":"success",closable:"",title:t.error?"Login Failed":"Login Successful",text:"",variant:"elevated",class:"alert-global"},{default:c(()=>[m(u(t.error||t.success),1)]),_:1},8,["type","title"])):p("",!0),s("div",F,[e[9]||(e[9]=v('<div class="row text-center mt-5" data-v-82867e4b><div class="col" data-v-82867e4b><div class="p-2" data-v-82867e4b><img style="width:350px;border-radius:100%;" src="'+N+'" alt="Logo" data-v-82867e4b></div><h2 data-v-82867e4b>ลงชื่อเข้าใช้</h2><p data-v-82867e4b> หรือ <a href="/auth/register" class="" data-v-82867e4b>สมัครสมาชิก</a></p></div></div>',1)),s("div",M,[s("div",T,[s("div",A,[s("div",E,[t.error?(n(),l("div",j,u(t.error),1)):p("",!0),s("form",{onSubmit:e[2]||(e[2]=B((...o)=>i.login&&i.login(...o),["prevent"]))},[s("div",q,[e[3]||(e[3]=s("label",{for:"inputEmail",class:"form-label"},"ชื่อผู้ใช้",-1)),b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.username=o),type:"text",class:"form-control",id:"inputEmail","aria-describedby":"emailHelp",required:""},null,512),[[f,t.username]])]),s("div",D,[e[4]||(e[4]=s("label",{for:"inputPassword",class:"form-label"},"รหัสผ่าน",-1)),b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),type:"password",class:"form-control",id:"inputPassword",required:""},null,512),[[f,t.password]])]),e[6]||(e[6]=v('<div class="d-flex w-100 justify-content-between mb-3" data-v-82867e4b><div class="form-check" data-v-82867e4b><input type="checkbox" name="remember" value="1" class="form-check-input" id="checkRememberMe" data-v-82867e4b><label class="form-check-label" for="checkRememberMe" data-v-82867e4b>จดจําฉัน</label></div><div data-v-82867e4b><a href="#" class="link-primary" data-v-82867e4b>ลืมรหัสผ่าน</a></div></div>',1)),d(S,{type:"submit",class:"w-100",color:"primary"},{default:c(()=>e[5]||(e[5]=[m(" เข้าสู่ระบบ ")])),_:1})],32),e[7]||(e[7]=s("hr",null,null,-1)),e[8]||(e[8]=s("div",{class:"text-center"},[s("a",{href:"/",class:"link-secondary"},"กลับสู่หน้าหลัก")],-1))])])])])])],64)}const P=g(U,[["render",I],["__scopeId","data-v-82867e4b"]]),R={components:{LoginComponent:P,FooterComponent:_}};function z(a,e,r,y,t,i){const o=L("LoginComponent"),w=_;return n(),l(h,null,[d(o),d(w)],64)}const X=g(R,[["render",z]]);export{X as default};
