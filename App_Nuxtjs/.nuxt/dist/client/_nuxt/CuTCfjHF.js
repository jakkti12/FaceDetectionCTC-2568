import{a as te}from"./CCb-kr4I.js";import{K,L as G,i as x,h as ne,aA as ae,at as oe,ab as se,ad as le,M as re,aE as ie,r as ue,ac as ce,a0 as fe,aa as de,a$ as me,e as ve,G as ge,af as ye,aS as R,F as pe,X as P,z as r,aM as T,b0 as we,aK as k,_ as _e,V as Ve,W as he,t as b,v as ke,A as f,x as y,J as I,B as E,y as C}from"./gszgXTxS.js";import{g as be}from"./CBkuNycD.js";import{_ as Ee}from"./7qluULSw.js";import{m as Ce,b as xe,c as Pe,f as Ae,d as V,V as j}from"./BZISSxIt.js";import{f as D,b as M,V as Se,d as Le}from"./Cvl1ETbA.js";import{V as N}from"./D4eIK50J.js";import{b as Re,V as Te,u as Ie,d as B,c as O}from"./DjbA1_97.js";import{f as je}from"./1DYzFgek.js";const A=["start","end","center"],z=["space-between","space-around","space-evenly"];function S(e,o){return ae.reduce((i,n)=>{const a=e+oe(n);return i[a]=o(),i},{})}const De=[...A,"baseline","stretch"],F=e=>De.includes(e),$=S("align",()=>({type:String,default:null,validator:F})),Me=[...A,...z],H=e=>Me.includes(e),J=S("justify",()=>({type:String,default:null,validator:H})),Ne=[...A,...z,"stretch"],W=e=>Ne.includes(e),X=S("alignContent",()=>({type:String,default:null,validator:W})),U={align:Object.keys($),justify:Object.keys(J),alignContent:Object.keys(X)},Be={align:"align",justify:"justify",alignContent:"align-content"};function Oe(e,o,i){let n=Be[e];if(i!=null){if(o){const a=o.replace(e,"");n+=`-${a}`}return n+=`-${i}`,n.toLowerCase()}}const Ue=K({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:F},...$,justify:{type:String,default:null,validator:H},...J,alignContent:{type:String,default:null,validator:W},...X,...Ce(),...xe()},"VRow"),Ke=G()({name:"VRow",props:Ue(),setup(e,o){let{slots:i}=o;const n=x(()=>{const a=[];let d;for(d in U)U[d].forEach(v=>{const p=e[v],l=Oe(d,v,p);l&&a.push(l)});return a.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),a});return()=>{var a;return ne(e.tag,{class:["v-row",n.value,e.class],style:e.style},(a=i.default)==null?void 0:a.call(i))}}}),Ge=K({id:String,submenu:Boolean,...se(Re({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Te}}),["absolute"])},"VMenu"),ze=G()({name:"VMenu",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:i}=o;const n=le(e,"modelValue"),{scopeId:a}=Ie(),{isRtl:d}=re(),v=ie(),p=x(()=>e.id||`v-menu-${v}`),l=ue(),u=ce(B,null),_=fe(new Set);de(B,{register(){_.value.add(v)},unregister(){_.value.delete(v)},closeParents(t){setTimeout(()=>{var s;!_.value.size&&!e.persistent&&(t==null||(s=l.value)!=null&&s.contentEl&&!me(t,l.value.contentEl))&&(n.value=!1,u==null||u.closeParents())},40)}}),ve(()=>{u==null||u.unregister(),document.removeEventListener("focusin",h)}),ge(()=>n.value=!1);async function h(t){var m,g,w;const s=t.relatedTarget,c=t.target;await ye(),n.value&&s!==c&&((m=l.value)!=null&&m.contentEl)&&((g=l.value)!=null&&g.globalTop)&&![document,l.value.contentEl].includes(c)&&!l.value.contentEl.contains(c)&&((w=R(l.value.contentEl)[0])==null||w.focus())}pe(n,t=>{t?(u==null||u.register(),T&&document.addEventListener("focusin",h,{once:!0})):(u==null||u.unregister(),T&&document.removeEventListener("focusin",h))},{immediate:!0});function Y(t){u==null||u.closeParents(t)}function q(t){var s,c,m,g,w;if(!e.disabled)if(t.key==="Tab"||t.key==="Enter"&&!e.closeOnContentClick){if(t.key==="Enter"&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;t.key==="Enter"&&t.preventDefault(),we(R((s=l.value)==null?void 0:s.contentEl,!1),t.shiftKey?"prev":"next",ee=>ee.tabIndex>=0)||(n.value=!1,(m=(c=l.value)==null?void 0:c.activatorEl)==null||m.focus())}else e.submenu&&t.key===(d.value?"ArrowRight":"ArrowLeft")&&(n.value=!1,(w=(g=l.value)==null?void 0:g.activatorEl)==null||w.focus())}function L(t){var c;if(e.disabled)return;const s=(c=l.value)==null?void 0:c.contentEl;s&&n.value?t.key==="ArrowDown"?(t.preventDefault(),t.stopImmediatePropagation(),k(s,"next")):t.key==="ArrowUp"?(t.preventDefault(),t.stopImmediatePropagation(),k(s,"prev")):e.submenu&&(t.key===(d.value?"ArrowRight":"ArrowLeft")?n.value=!1:t.key===(d.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),k(s,"first"))):(e.submenu?t.key===(d.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(n.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>L(t))))}const Q=x(()=>P({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-owns":p.value,onKeydown:L},e.activatorProps));return Pe(()=>{const t=O.filterProps(e);return r(O,P({ref:l,id:p.value,class:["v-menu",e.class],style:e.style},t,{modelValue:n.value,"onUpdate:modelValue":s=>n.value=s,absolute:!0,activatorProps:Q.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":Y,onKeydown:q},a),{activator:i.activator,default:function(){for(var s=arguments.length,c=new Array(s),m=0;m<s;m++)c[m]=arguments[m];return r(Ae,{root:"VMenu"},{default:()=>{var g;return[(g=i.default)==null?void 0:g.call(i,...c)]}})}})}),je({id:p,ΨopenChildren:_},l)}}),Fe={data(){return{user:{username:"",email:"",profile:"",user_type:""},is_logged_in:!1,router:Ve(),route:he()}},methods:{async logout(){try{const e=await te.post("http://localhost:7000/auth/logout",{});e.status==200?(localStorage.removeItem("token"),this.router.push("/auth/login")):console.error("Error during logout:",e)}catch(e){console.error("Error during logout:",e)}}},async mounted(){const e=await be();e.is_logged_in==!0?(this.user=e.user,this.is_logged_in=!0):this.is_logged_in=!1}},$e={class:"container mt-4"},He={class:"mx-auto text-center"},Je={class:"text-caption mt-1"};function We(e,o,i,n,a,d){return b(),ke("div",$e,[r(Ke,{justify:"space-between",align:"center"},{default:f(()=>[o[3]||(o[3]=y("a",{href:"/"},[y("img",{src:Ee,alt:"logo",style:{width:"120px"}})],-1)),y("div",null,[a.is_logged_in?(b(),I(ze,{key:1,"min-width":"200px",rounded:"",class:"menu-bar"},{activator:f(({props:v})=>[r(V,P({icon:""},v),{default:f(()=>[r(D,{color:"white",size:"large"},{default:f(()=>[r(M,{src:a.user.profile,alt:"Profile Picture",cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:f(()=>[r(Se,{class:"down-menu"},{default:f(()=>[r(Le,null,{default:f(()=>[y("div",He,[r(D,{color:"brown"},{default:f(()=>[r(M,{src:a.user.profile,alt:"Profile Picture",cover:""},null,8,["src"])]),_:1}),y("h3",null,C(a.user.fullName),1),y("p",Je,C(a.user.email),1),r(N,{class:"my-3"}),r(V,{variant:"text",rounded:"",onClick:o[0]||(o[0]=v=>a.router.push(a.user.user_type))},{default:f(()=>[r(j,{start:"",icon:"mdi-account"}),E(" "+C(a.user.user_type),1)]),_:1}),r(N,{class:"my-3"}),r(V,{variant:"text",rounded:"",onClick:d.logout},{default:f(()=>[r(j,{start:"",icon:"mdi-logout"}),o[2]||(o[2]=E(" Logout "))]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})):(b(),I(V,{key:0,href:"/auth/login",class:"text-primary",outlined:""},{default:f(()=>o[1]||(o[1]=[E(" ลงชื่อเข้าสู่ระบบ ")])),_:1}))])]),_:1})])}const ot=_e(Fe,[["render",We],["__scopeId","data-v-f0383405"]]);export{Ke as V,ot as _,ze as a};
