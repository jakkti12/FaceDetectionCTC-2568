import{K as C,L as F,r as m,z as t,_ as R,V as S,W as B,i as N,J as I,A as a,t as q,x as w,B as V,y as _}from"./gszgXTxS.js";import{a as D}from"./CCb-kr4I.js";import{V as U}from"./CD5PZ4Wl.js";import{m as z,c as A,V as b,d as O}from"./BZISSxIt.js";import{m as T,c as J,V as x}from"./BWn29xGB.js";import{f as K}from"./1DYzFgek.js";import{V as k}from"./BTIj9U6y.js";import{V as L}from"./Dt6yrLrZ.js";import"./B8TcFJPE.js";const M=C({...z(),...T()},"VForm"),W=F()({name:"VForm",props:M(),emits:{"update:modelValue":p=>!0,submit:p=>!0},setup(p,g){let{slots:r,emit:n}=g;const o=J(p),d=m();function f(u){u.preventDefault(),o.reset()}function c(u){const i=u,l=o.validate();i.then=l.then.bind(l),i.catch=l.catch.bind(l),i.finally=l.finally.bind(l),n("submit",i),i.defaultPrevented||l.then(y=>{var v;let{valid:h}=y;h&&((v=d.value)==null||v.submit())}),i.preventDefault()}return A(()=>{var u;return t("form",{ref:d,class:["v-form",p.class],style:p.style,novalidate:!0,onReset:f,onSubmit:c},[(u=r.default)==null?void 0:u.call(r,o)])}),K(o,d)}}),$={__name:"changepassword",setup(p){const g=S();B();const r=m(""),n=m(""),o=m(""),d=m(!1),f=m(!1),c=m(!1),u=N(()=>r.value&&n.value&&o.value&&n.value===o.value),i=async()=>{var v,e;if(n.value!==o.value){alert("รหัสผ่านใหม่และยืนยันรหัสผ่านไม่ตรงกัน");return}try{const s=localStorage.getItem("token"),P=await D.post("http://localhost:7000/settings/change-password",{newPassword:n.value,originalPassword:r.value},{headers:{authorization:s}});alert(P.data.message),g.push("setting")}catch(s){const P=((e=(v=s.response)==null?void 0:v.data)==null?void 0:e.message)||s.message;alert(`เกิดข้อผิดพลาด: ${P}`)}},l=()=>{d.value=!d.value},y=()=>{f.value=!f.value},h=()=>{c.value=!c.value};return(v,e)=>(q(),I(U,{class:"change-password container mt-5"},{default:a(()=>[e[4]||(e[4]=w("div",{class:"text-center"},[w("hr"),w("h1",{class:"text-h5 font-weight-bold"},"เปลี่ยนรหัสผ่าน"),w("hr")],-1)),t(L,null,{default:a(()=>[t(W,null,{default:a(()=>[t(x,null,{default:a(()=>[t(k,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),type:d.value?"text":"password",label:"กรอกรหัสผ่านเดิม",outlined:"",dense:"",required:""},{append:a(()=>[t(b,{onClick:l},{default:a(()=>[V(_(d.value?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),t(x,null,{default:a(()=>[t(k,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),type:f.value?"text":"password",label:"กรอกรหัสผ่านใหม่",outlined:"",dense:"",required:""},{append:a(()=>[t(b,{onClick:y},{default:a(()=>[V(_(f.value?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),t(x,null,{default:a(()=>[t(k,{modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s),type:c.value?"text":"password",label:"ยืนยันรหัสผ่านใหม่",outlined:"",dense:"",required:""},{append:a(()=>[t(b,{onClick:h},{default:a(()=>[V(_(c.value?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),t(O,{color:"primary",class:"mt-4",onClick:i,disabled:!u.value},{default:a(()=>e[3]||(e[3]=[V(" ยืนยันการเปลี่ยนรหัส ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}},ae=R($,[["__scopeId","data-v-2bdf7a84"]]);export{ae as default};
